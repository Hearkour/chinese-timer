name: Minimizing CI
on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        os: [ ubuntu-latest, windows-latest ]
    name: ${{ matrix.os }}
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      # - name: Use Node.js
      #   uses: actions/setup-node@v1
      #   with:
      #     node-version: '12.x'
      
      - name: Build minimizing dependencies
        run: |
          npm install --save-dev terser
          npm ci
          terser -V
          csso -v
          npm run build

      # uglifyjs -v
      # uglifyjs scripts/root-init.js scripts/draw.js scripts/printtime.js scripts/buttons.js \
      #          -o chinese-timer.min.js -c -m --mangle-props \
      #          --source-map "root='https://raw.githubusercontent.com/Hearkour/chinese-timer/master/scripts'"
