const e=document.documentElement,t=document.body;function i(e){return document.getElementById(e)}function n(e){return document.querySelector(e)}function s(e){return document.getElementsByClassName(e)[0]}function a(){return getComputedStyle(t).fontSize.slice(0,-2)}function r(){return Math.floor(performance.now()/1e3)}function c(t,i,n){e.style.setProperty(t,i,n)}function o(t){return e.style.getPropertyValue(t)}function l(e){return parseInt(e.substr(1,2),16)+", "+parseInt(e.substr(3,2),16)+", "+parseInt(e.substr(5,2),16)}function d(e){let t=e.split(/[rgb, \(\)]+/).slice(1,4).map(e=>+e),i="#";return t.forEach(e=>{i+=e>9?e.toString(16):"0"+e.toString(16)}),i}function m(e){for(const t of document.getElementsByClassName("wrapper"))e.push(t.id)}function p(e,t){0==t?e.forEach(e=>{i(e).classList.remove("wrapper")}):e.forEach(e=>{i(e).classList.contains("wrapper")||i(e).classList.add("wrapper")})}const u=i("title"),b=i("timer-digits"),h=i("timer-chinese-chars"),g=i("timer-chinese-pinyin"),v=i("div-selectTimeout");v.innerHTML='\n    <abbr title=\'시간 선택\'>\n        <select id="select-setTimeout">\n            <option value="60"          >   1분 </option>\n            <option value="180"         >   3분 </option>\n            <option value="300" selected>   5분 </option>\n        </select>\n    </abbr>\n';const f=i("select-setTimeout"),$=!1,w=[];var k=.2,T="180, 0, 60",y=.25,I=.5,S="calc(var(--case-size) / 1.4)";const x=.4,L=1.1,E=1,M="6vmax";var z;const H="배달의민족 연성";var A,B;const N=1.25,P=1.5,q="9vw",F="solid",W="solid",O=1;var C="6px";function _(){let e=ee.getIds().map(e=>e.innerText);return 6e3*e[0]+600*e[1]+60*e[2]+100*e[3]+10*e[4]+1*e[5]}function U(e,t){c("--base-color",`rgb(${T=e})`),c("--wrapper-alpha",`rgba(${T}, ${k})`),t?(c("--btn-setTime-alpha",`rgba(${T}, 1`),c("--btn-alpha",`rgba(${T}, 1)`),c("--border-alpha",`rgba(${T}, 1)`)):(G.editing?c("--btn-setTime-alpha",`rgba(${T}, ${y}`):1==ge.getState()?c("--btn-setTime-alpha",`rgba(${T}, 1`):c("--btn-setTime-alpha",`rgba(${T}, ${I}`),c("--border-alpha",`rgba(${T}, ${ge.getState()})`),1==ge.getState()?(c("--btn-alpha",`rgba(${T}, 1)`),0==ue.getState()&&c("--btn-setTime-alpha",`rgba(${T}, 1`)):(c("--btn-alpha",`rgba(${T}, ${I})`),0==ue.getState()&&c("--btn-setTime-alpha",`rgba(${T}, ${I}`)))}function j(e){let t;return t="분"!=e&&"초"!=e&&G.getBaseHTML().includes("editTime")?"hue-rotate(1rad) brightness(1.1)":"brightness(0.4)"," "==e&&"0"!=e&&(e="&#8202;"),`<span style="filter: ${t};">${e}</span>`}function V(i,n){let s=i+n,a=e.clientHeight-t.clientHeight;c("--body-margin",`${a*(i/s)}px ${C} ${a*(n/s)}px ${C}`)}function D(t){let i,n=t.split(/[(), ]+/),s=void 0;const a=e.clientWidth,r=e.clientHeight;return n.forEach(e=>{if("min"!=e&&"max"!=e&&""!=e){switch(e.slice(-2)){case"px":i=parseInt(e.slice(0,-2));break;case"vw":i=parseInt(e.slice(0,-2))/100*a;break;case"vh":i=parseInt(e.slice(0,-2))/100*r;break;case"vmin":i=parseInt(e.slice(0,-4))/100*(a<r?a:r);break;case"vmax":i=parseInt(e.slice(0,-4))/100*(a>r?a:r)}(null==s||"min"==n[0]&&s>i||"max"==n[0]&&s<i)&&(s=i)}}),s}const G={class:`class="outer case ${B}"`,style:`style="width: var(--case-size); border-right: none; ${A}"`,editing:!1,drawPaused:!1,isActive:!1,timeout:300,initialTime:0,stoppedTime:0,interval:0,now:0,remains:0,getBaseHTML:()=>(G.class=`class="outer case ${B}"`,G.style=`style="width: var(--case-size); border-right: none; ${A}"`,G.class+G.style),reset:()=>{G.initialTime=G.stoppedTime=G.interval=0,G.now=G.remains=0}};m(w),p(w,$),c("--font-family","배달의민족 연성"),c("--font-size",`min(6vmax, ${z})`),u.innerHTML=j(u.innerHTML),c("--case-size-fixed",1.5*a()+"px"),c("--case-size",`min(${1.5*a()}px, 9vw)`),c("--btn-size",S),c("--case-border-style","solid"),c("--border-style","solid"),U(T,!0),c("--border-thickness",C),c("--font-size-title",1.25*a()+"px"),c("--case-size-title",D(o("--case-size"))+.25*a()+"px");class J{static fpsInterval;static startTime;static now;static then;static elapsed}function K(e){J.fpsInterval=1e3/e,J.then=performance.now(),J.startTime=J.then,Q(),Y()}function Q(){J.now=performance.now(),J.elapsed=J.now-J.then,J.elapsed>J.fpsInterval&&(J.then=J.now-J.elapsed%J.fpsInterval,R()),G.drawPaused||requestAnimationFrame(Q)}function R(){te(b,"digits"),te(h,"chinese","chars"),te(g,"chinese","pinyin")}function X(){z=window.innerWidth>1400?window.innerHeight<420?"1.5rem":window.innerHeight<640?"2.5rem":window.innerHeight<780?"3.5rem":"4.5rem":window.innerWidth>1080?"3.5rem":window.innerWidth>840?"3rem":"2.4rem",C=window.innerWidth>840&&window.innerHeight>540?"5px":"3px"}function Y(){X(),V(1,1.618),c("--font-size",`min(6vmax, ${z})`),c("--case-size",`min(${1.5*a()}px, 9vw)`),c("--border-thickness",C),c("--font-size-title",1.25*a()+"px"),c("--case-size-title",D(o("--case-size"))+.25*a()+"px"),requestAnimationFrame(Y)}K(5);const Z={c:function(e){let t="";switch(e){case 0:t="零";break;case 1:t="一";break;case 2:t="二";break;case 3:t="三";break;case 4:t="四";break;case 5:t="五";break;case 6:t="六";break;case 7:t="七";break;case 8:t="八";break;case 9:t="九";break;case 10:t="十"}return t},p:function(e){let t="";switch(e){case 0:t="líng";break;case 1:t="yī";break;case 2:t="èr";break;case 3:t="sān";break;case 4:t="sì";break;case 5:t="wǔ";break;case 6:t="liù";break;case 7:t="qī";break;case 8:t="bā";break;case 9:t="jiǔ";break;case 10:t="shí"}return t}},ee={m3:0,m2:0,m1:0,s3:0,s2:0,s1:0,getIds:function(){return[i("m3"),i("m2"),i("m1"),i("s3"),i("s2"),i("s1")]},convertTo:e=>{"chars"==e?(ee.m3=Z.c(ee.m3),ee.m2=Z.c(ee.m2),ee.m1=Z.c(ee.m1),ee.s3=Z.c(ee.s3),ee.s2=Z.c(ee.s2),ee.s1=Z.c(ee.s1)):"pinyin"==e&&(ee.m3=Z.p(ee.m3),ee.m2=Z.p(ee.m2),ee.m1=Z.p(ee.m1),ee.s3=Z.p(ee.s3),ee.s2=Z.p(ee.s2),ee.s1=Z.p(ee.s1))}};function te(e,t,i){G.isActive?(G.initialTime||(G.initialTime=r()),G.now=r()-G.initialTime):G.initialTime&&(G.interval=r()-G.stoppedTime),G.remains=G.timeout-G.now,G.remains<0&&(G.remains=0),ie(e,t,i,Math.floor(G.remains/60),Math.floor(G.remains%60))}function ie(e,t,i,n,s){ne(t,n,s),se(e,t,i)}function ne(e,t,i){"digits"==e?(ee.m3=ee.s3=" ",ee.m2=t<10?" ":Math.floor(t/10),ee.s2=i<10?" ":Math.floor(i/10),ee.m1=Math.floor(t%10),ee.s1=Math.floor(i%10)):"chinese"==e&&(ne("digits",t,i),ee.m3=ee.m2>1?ee.m2:"",ee.s3=ee.s2>1?ee.s2:"",ee.m2=ee.m2>0?10:"",ee.s2=ee.s2>0?10:"",ee.m2>0&&0==ee.m1&&(ee.m1=""),ee.s2>0&&0==ee.s1&&(ee.s1=""))}function se(e,t,i){let n,s,a="";A=B="","digits"==t?(n="분",s="초",A="font-family: simsun; font-weight: bold;",a=`contenteditable="${G.editing}"`,B=G.editing?"editTime":""):"chinese"==t&&("chars"==i?(ee.convertTo("chars"),n="分",s="秒",e.style.fontFamily="kaiti"):"pinyin"==i&&(ee.convertTo("pinyin"),n="fēn",s="miǎo",e.style.fontFamily="NotoSerif-Medium"));let r=G.getBaseHTML();e.innerHTML=`\n        <div class="outer">\n            <div id="m3"             ${r}>   ${j(ee.m3)}   </div>\n            <div id="m2" ${a} ${r}>   ${j(ee.m2)}   </div>\n            <div id="m1" ${a} ${r}>   ${j(ee.m1)}   </div>\n            <div ${r.split("font")[0]}">     ${j(n)} </div>\n            <div ${r.split("font")[0]}">                             </div>\n            <div id="s3"             ${r}>   ${j(ee.s3)}   </div>\n            <div id="s2" ${a} ${r}>   ${j(ee.s2)}   </div>\n            <div id="s1" ${a} ${r}>   ${j(ee.s1)}   </div>\n            <div ${r.split("border")[0]}">   ${j(s)} </div>\n        </div>\n    `}const ae=i("btn-setTimeout"),re=i("btn-timer"),ce=i("btn-resetTime"),oe=i("btn-border"),le=i("btn-color"),de=i("btn-wrapper");var me=!1;class pe{constructor(e,t,i=null,n=i,s=null,a=null){this.$btnId=e,this.description=t,this.states=[i,n],this.iconName=[s,a],this.i=0,"UNSET"!=i&&this.setupBtn()}doclick(){return this.switchState(),this.setupBtn(),this.i}switchState(){return this.i=this.i?0:1}getState(){return this.states[this.i]}getIconName(){return null==this.iconName[0]?""+this.$btnId.id:`${this.$btnId.id}-${this.iconName[this.i]}`}setupBtn(){this.$btnId.innerHTML=`\n            <abbr title='${this.description}'>\n                <svg>\n                    <use xlink:href="icons/min/${this.getIconName()}.svg#레이어_1"></use>\n                </svg>\n            </abbr>\n        `}}var ue=new pe(ae,"시간 설정",!1,!0,"edit","resume"),be=new pe(re,"타이머 시작/일시 정지",G.isActive,!0,"start","stop"),he=new pe(ce,"타이머 초기화",G.timeout),ge=new pe(oe,"윤곽선 숨기기/보이기",1,0,"none","solid"),ve=new pe(le,"색 선택","UNSET"),fe=new pe(de,"모서리 모양",$,!0,"wrap","nowrap");function $e(){i("cpOuter").style.fill=i("colorpicker").value,i("cpOuter").style.filter="brightness(100%)",i("cpInner").style.fill=i("colorpicker").value,i("cpInner").style.filter="brightness(0.4)",me?requestAnimationFrame($e):(i("cpOuter").removeAttribute("style"),i("cpInner").removeAttribute("style"))}ve.setupBtn=()=>{ve.$btnId.innerHTML=`\n        <abbr title='${ve.description}'>\n            <div style="position: relative; display: inline-block;">\n                <input id="colorpicker" type="color" value="${d(o("--base-color"))}">\n                <label for="colorpicker">\n                    <svg id="cpOuter" class="outer">\n                        <use xlink:href="icons/min/btn-color-outer.svg#레이어_1"></use>\n                    </svg>\n                    <svg id="cpInner" class="inner">\n                        <use xlink:href="icons/min/btn-color-inner.svg#레이어_1"></use>\n                    </svg>\n                </label>\n            </div>\n        </abbr>\n    `},ve.setupBtn(),ae.addEventListener("click",(function(){ue.doclick(),G.editing=ue.getState(),G.editing?(c("--btn-setTime-alpha",`rgba(${T}, ${y}`),G.isActive&&re.click(),R(),G.drawPaused=!0):(1==ge.getState()?c("--btn-setTime-alpha",`rgba(${T}, 1`):c("--btn-setTime-alpha",`rgba(${T}, ${I}`),G.timeout=_(),G.reset(),R())})),re.addEventListener("click",(function(){be.doclick(),G.isActive=be.getState(),G.isActive?(1==ue.getState()&&ae.click(),G.initialTime+=G.interval,G.drawPaused&&(G.drawPaused=!1,Q())):G.stoppedTime=r()})),ce.addEventListener("click",(function(){G.reset()})),oe.addEventListener("click",(function(){ge.doclick(),c("--border-alpha",`rgba(${T}, ${ge.getState()})`),1==ge.getState()?(c("--btn-alpha",`rgba(${T}, 1)`),0==ue.getState()&&c("--btn-setTime-alpha",`rgba(${T}, 1`)):(c("--btn-alpha",`rgba(${T}, ${I})`),0==ue.getState()&&c("--btn-setTime-alpha",`rgba(${T}, ${I}`))})),le.addEventListener("click",(function(){me=!0,$e()})),i("colorpicker").addEventListener("change",(function(){me=!1,U(l(i("colorpicker").value))})),de.addEventListener("click",(function(){fe.doclick(),console.log(fe.getState()),p(w,fe.getState())})),f.addEventListener("change",(function(){G.isActive&&re.click(),G.timeout=parseInt(f.value),G.reset()}));