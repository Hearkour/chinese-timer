const e=document.documentElement,t=document.body;function i(e){return document.getElementById(e)}function n(e){return document.querySelector(e)}function s(e){return document.getElementsByClassName(e)[0]}function r(){return getComputedStyle(t).fontSize.slice(0,-2)}function a(){return Math.floor(performance.now()/1e3)}function c(t,i,n){e.style.setProperty(t,i,n)}function o(t){return e.style.getPropertyValue(t)}function l(e){return parseInt(e.substr(1,2),16)+", "+parseInt(e.substr(3,2),16)+", "+parseInt(e.substr(5,2),16)}function d(e){let t=e.split(/[rgb, \(\)]+/).slice(1,4).map(e=>+e),i="#";return t.forEach(e=>{i+=e>9?e.toString(16):"0"+e.toString(16)}),i}const m=i("title"),u=i("timer-digits"),b=i("timer-chinese-chars"),p=i("timer-chinese-pinyin");var h="140, 120, 210",g=.2,$=.25,v=.5;const f=.4,k=1.1,w=1,T="6vmax";var y;const S="배달의민족 연성";var I,x;const M=1.5,L="9vw",E="solid",A="solid",H=1;var z="6px";function B(){let e=D.getIds().map(e=>e.innerText);return 6e3*e[0]+600*e[1]+60*e[2]+100*e[3]+10*e[4]+1*e[5]}function N(e,t){c("--base-color",`rgb(${h=e})`),c("--wrapper-alpha",`rgba(${h}, ${g})`),t?(c("--btn-setTime-alpha",`rgba(${h}, 1`),c("--btn-alpha",`rgba(${h}, 1)`),c("--border-alpha",`rgba(${h}, 1)`)):(F.editing?c("--btn-setTime-alpha",`rgba(${h}, ${$}`):1==ae.getState()?c("--btn-setTime-alpha",`rgba(${h}, 1`):c("--btn-setTime-alpha",`rgba(${h}, ${v}`),c("--border-alpha",`rgba(${h}, ${ae.getState()})`),1==ae.getState()?(c("--btn-alpha",`rgba(${h}, 1)`),0==ne.getState()&&c("--btn-setTime-alpha",`rgba(${h}, 1`)):(c("--btn-alpha",`rgba(${h}, ${v})`),0==ne.getState()&&c("--btn-setTime-alpha",`rgba(${h}, ${v}`)))}function P(e){let t;return t="분"!=e&&"초"!=e&&F.getBaseHTML().includes("editTime")?"hue-rotate(1rad) brightness(1.1)":"brightness(0.4)"," "==e&&"0"!=e&&(e="&#8202;"),`<span style="filter: ${t};">${e}</span>`}function q(i,n){let s=i+n,r=e.clientHeight-t.clientHeight;c("--body-margin",`${r*(i/s)}px ${z} ${r*(n/s)}px ${z}`)}const F={class:`class="outer case ${x}"`,style:`style="width: var(--case-size); border-right: none; ${I}"`,editing:!1,drawPaused:!1,isActive:!1,timeout:1800,initialTime:0,stoppedTime:0,interval:0,now:0,remains:0,getBaseHTML:()=>(F.class=`class="outer case ${x}"`,F.style=`style="width: var(--case-size); border-right: none; ${I}"`,F.class+F.style),reset:()=>{F.initialTime=F.stoppedTime=F.interval=0,F.now=F.remains=0}};c("--font-family","배달의민족 연성"),c("--font-size",`min(6vmax, ${y})`),m.innerHTML=P(m.innerHTML),c("--case-size-fixed",1.5*r()+"px"),c("--case-size",`min(${1.5*r()}px, 9vw)`),c("--case-border-style","solid"),c("--border-style","solid"),N(h,!0),c("--border-thickness",z);class O{static fpsInterval;static startTime;static now;static then;static elapsed}function W(e){O.fpsInterval=1e3/e,O.then=performance.now(),O.startTime=O.then,_(),j()}function _(){O.now=performance.now(),O.elapsed=O.now-O.then,O.elapsed>O.fpsInterval&&(O.then=O.now-O.elapsed%O.fpsInterval,C()),F.drawPaused||requestAnimationFrame(_)}function C(){G(u,"digits"),G(b,"chinese","chars"),G(p,"chinese","pinyin")}function U(){y=window.innerWidth>1400?"4.5rem":window.innerWidth>1080?"3.5rem":window.innerWidth>840?"3rem":"2.4rem",z=window.innerWidth>840&&window.innerHeight>540?"5px":"3px"}function j(){U(),q(1,1.618),c("--font-size",`min(6vmax, ${y})`),c("--case-size",`min(${1.5*r()}px, 9vw)`),c("--border-thickness",z),requestAnimationFrame(j)}W(5);const V={c:function(e){let t="";switch(e){case 0:t="零";break;case 1:t="一";break;case 2:t="二";break;case 3:t="三";break;case 4:t="四";break;case 5:t="五";break;case 6:t="六";break;case 7:t="七";break;case 8:t="八";break;case 9:t="九";break;case 10:t="十"}return t},p:function(e){let t="";switch(e){case 0:t="líng";break;case 1:t="yī";break;case 2:t="èr";break;case 3:t="sān";break;case 4:t="sì";break;case 5:t="wǔ";break;case 6:t="liù";break;case 7:t="qī";break;case 8:t="bā";break;case 9:t="jiǔ";break;case 10:t="shí"}return t}},D={m3:0,m2:0,m1:0,s3:0,s2:0,s1:0,getIds:function(){return[i("m3"),i("m2"),i("m1"),i("s3"),i("s2"),i("s1")]},convertTo:e=>{"chars"==e?(D.m3=V.c(D.m3),D.m2=V.c(D.m2),D.m1=V.c(D.m1),D.s3=V.c(D.s3),D.s2=V.c(D.s2),D.s1=V.c(D.s1)):"pinyin"==e&&(D.m3=V.p(D.m3),D.m2=V.p(D.m2),D.m1=V.p(D.m1),D.s3=V.p(D.s3),D.s2=V.p(D.s2),D.s1=V.p(D.s1))}};function G(e,t,i){F.isActive?(F.initialTime||(F.initialTime=a()),F.now=a()-F.initialTime):F.initialTime&&(F.interval=a()-F.stoppedTime),F.remains=F.timeout-F.now,F.remains<0&&(F.remains=0),J(e,t,i,Math.floor(F.remains/60),Math.floor(F.remains%60))}function J(e,t,i,n,s){K(t,n,s),Q(e,t,i)}function K(e,t,i){"digits"==e?(D.m3=D.s3=" ",D.m2=t<10?" ":Math.floor(t/10),D.s2=i<10?" ":Math.floor(i/10),D.m1=Math.floor(t%10),D.s1=Math.floor(i%10)):"chinese"==e&&(K("digits",t,i),D.m3=D.m2>1?D.m2:"",D.s3=D.s2>1?D.s2:"",D.m2=D.m2>0?10:"",D.s2=D.s2>0?10:"",D.m2>0&&0==D.m1&&(D.m1=""),D.s2>0&&0==D.s1&&(D.s1=""))}function Q(e,t,i){let n,s,r="";I=x="","digits"==t?(n="분",s="초",I="font-family: simsun; font-weight: bold;",r=`contenteditable="${F.editing}"`,x=F.editing?"editTime":""):"chinese"==t&&("chars"==i?(D.convertTo("chars"),n="分",s="秒",e.style.fontFamily="simkai"):"pinyin"==i&&(D.convertTo("pinyin"),n="fēn",s="miǎo",e.style.fontFamily="NotoSerif-Medium"));let a=F.getBaseHTML();e.innerHTML=`\n        <div class="outer">\n            <div id="m3"             ${a}>   ${P(D.m3)}   </div>\n            <div id="m2" ${r} ${a}>   ${P(D.m2)}   </div>\n            <div id="m1" ${r} ${a}>   ${P(D.m1)}   </div>\n            <div ${a.split("font")[0]}">     ${P(n)} </div>\n            <div ${a.split("font")[0]}">                             </div>\n            <div id="s3"             ${a}>   ${P(D.s3)}   </div>\n            <div id="s2" ${r} ${a}>   ${P(D.s2)}   </div>\n            <div id="s1" ${r} ${a}>   ${P(D.s1)}   </div>\n            <div ${a.split("border")[0]}">   ${P(s)} </div>\n        </div>\n    `}const R=i("btn-setTimeout"),X=i("btn-timer"),Y=i("btn-resetTime"),Z=i("btn-border"),ee=i("btn-color");var te=!1;class ie{constructor(e,t,i=null,n=i,s=null,r=null){this.$btnId=e,this.description=t,this.states=[i,n],this.iconName=[s,r],this.i=0,"UNSET"!=i&&this.setupBtn()}doclick(){return this.switchState(),this.setupBtn(),this.i}switchState(){return this.i=this.i?0:1}getState(){return this.states[this.i]}getIconName(){return null==this.iconName[0]?""+this.$btnId.id:`${this.$btnId.id}-${this.iconName[this.i]}`}setupBtn(){this.$btnId.innerHTML=`\n            <abbr title='${this.description}'>\n                <svg style="width: var(--case-size); height: var(--case-size);">\n                    <use xlink:href="icons/${this.getIconName()}.svg#레이어_1"></use>\n                </svg>\n            </abbr>\n        `}}var ne=new ie(R,"시간 설정",!1,!0,"edit","resume"),se=new ie(X,"타이머 시작/일시 정지",F.isActive,!0,"start","stop"),re=new ie(Y,"타이머 초기화",F.timeout),ae=new ie(Z,"윤곽선 숨기기/보이기",1,0,"none","solid"),ce=new ie(ee,"색 선택","UNSET");function oe(){i("cpOuter").style.fill=i("colorpicker").value,i("cpOuter").style.filter="brightness(100%)",i("cpInner").style.fill=i("colorpicker").value,i("cpInner").style.filter="brightness(0.4)",te?requestAnimationFrame(oe):(i("cpOuter").removeAttribute("style"),i("cpInner").removeAttribute("style"))}ce.setupBtn=()=>{ce.$btnId.innerHTML=`\n        <abbr title='${ce.description}'>\n            <div style="position: relative; display:inline-block;">\n                <input id="colorpicker" type="color" value="${d(o("--base-color"))}">\n                <label for="colorpicker">\n                    <svg id="cpOuter" class="outer">\n                        <use xlink:href="icons/btn-color-outer.svg#레이어_1"></use>\n                    </svg>\n                    <svg id="cpInner" class="inner">\n                        <use xlink:href="icons/btn-color-inner.svg#레이어_1"></use>\n                    </svg>\n                </label>\n            </div>\n        </abbr>\n    `},ce.setupBtn(),R.addEventListener("click",(function(){ne.doclick(),F.editing=ne.getState(),F.editing?(c("--btn-setTime-alpha",`rgba(${h}, ${$}`),F.isActive&&X.click(),C(),F.drawPaused=!0):(1==ae.getState()?c("--btn-setTime-alpha",`rgba(${h}, 1`):c("--btn-setTime-alpha",`rgba(${h}, ${v}`),F.timeout=B(),F.reset(),C())})),X.addEventListener("click",(function(){se.doclick(),F.isActive=se.getState(),F.isActive?(1==ne.getState()&&R.click(),F.initialTime+=F.interval,F.drawPaused&&(F.drawPaused=!1,_())):F.stoppedTime=a()})),Y.addEventListener("click",(function(){F.reset()})),Z.addEventListener("click",(function(){ae.doclick(),c("--border-alpha",`rgba(${h}, ${ae.getState()})`),1==ae.getState()?(c("--btn-alpha",`rgba(${h}, 1)`),0==ne.getState()&&c("--btn-setTime-alpha",`rgba(${h}, 1`)):(c("--btn-alpha",`rgba(${h}, ${v})`),0==ne.getState()&&c("--btn-setTime-alpha",`rgba(${h}, ${v}`))})),ee.addEventListener("click",(function(){te=!0,oe()})),i("colorpicker").addEventListener("change",(function(){te=!1,N(l(i("colorpicker").value))}));