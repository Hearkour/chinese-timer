const e=document.documentElement,t=document.body;function i(e){return document.getElementById(e)}function n(e){return document.querySelector(e)}function s(e){return document.getElementsByClassName(e)[0]}function a(){return getComputedStyle(t).fontSize.slice(0,-2)}function r(){return Math.floor(performance.now()/1e3)}function c(t,i,n){e.style.setProperty(t,i,n)}function o(t){return e.style.getPropertyValue(t)}function l(e){return parseInt(e.substr(1,2),16)+", "+parseInt(e.substr(3,2),16)+", "+parseInt(e.substr(5,2),16)}function d(e){let t=e.split(/[rgb, \(\)]+/).slice(1,4).map(e=>+e),i="#";return t.forEach(e=>{i+=e>9?e.toString(16):"0"+e.toString(16)}),i}function m(e){for(const t of document.getElementsByClassName("wrapper"))e.push(t.id)}function p(e,t){0==t?e.forEach(e=>{i(e).classList.remove("wrapper")}):e.forEach(e=>{i(e).classList.contains("wrapper")||i(e).classList.add("wrapper")})}const u=i("title"),b=i("timer-digits"),h=i("timer-chinese-chars"),g=i("timer-chinese-pinyin"),f=!0,v=[];var $=.2,w="180, 0, 60",k=.25,T=.5,y="calc(var(--case-size) / 1.4)";const I=.4,S=1.1,x=1,L="6vmax";var E;const z="배달의민족 연성";var M,H;const A=1.25,B=1.5,N="9vw",P="solid",q="solid",F=1;var W="6px";function O(){let e=Y.getIds().map(e=>e.innerText);return 6e3*e[0]+600*e[1]+60*e[2]+100*e[3]+10*e[4]+1*e[5]}function C(e,t){c("--base-color",`rgb(${w=e})`),c("--wrapper-alpha",`rgba(${w}, ${$})`),t?(c("--btn-setTime-alpha",`rgba(${w}, 1`),c("--btn-alpha",`rgba(${w}, 1)`),c("--border-alpha",`rgba(${w}, 1)`)):(V.editing?c("--btn-setTime-alpha",`rgba(${w}, ${k}`):1==be.getState()?c("--btn-setTime-alpha",`rgba(${w}, 1`):c("--btn-setTime-alpha",`rgba(${w}, ${T}`),c("--border-alpha",`rgba(${w}, ${be.getState()})`),1==be.getState()?(c("--btn-alpha",`rgba(${w}, 1)`),0==me.getState()&&c("--btn-setTime-alpha",`rgba(${w}, 1`)):(c("--btn-alpha",`rgba(${w}, ${T})`),0==me.getState()&&c("--btn-setTime-alpha",`rgba(${w}, ${T}`)))}function _(e){let t;return t="분"!=e&&"초"!=e&&V.getBaseHTML().includes("editTime")?"hue-rotate(1rad) brightness(1.1)":"brightness(0.4)"," "==e&&"0"!=e&&(e="&#8202;"),`<span style="filter: ${t};">${e}</span>`}function U(i,n){let s=i+n,a=e.clientHeight-t.clientHeight;c("--body-margin",`${a*(i/s)}px ${W} ${a*(n/s)}px ${W}`)}function j(t){let i,n=t.split(/[(), ]+/),s=void 0;const a=e.clientWidth,r=e.clientHeight;return n.forEach(e=>{if("min"!=e&&"max"!=e&&""!=e){switch(e.slice(-2)){case"px":i=parseInt(e.slice(0,-2));break;case"vw":i=parseInt(e.slice(0,-2))/100*a;break;case"vh":i=parseInt(e.slice(0,-2))/100*r;break;case"vmin":i=parseInt(e.slice(0,-4))/100*(a<r?a:r);break;case"vmax":i=parseInt(e.slice(0,-4))/100*(a>r?a:r)}(null==s||"min"==n[0]&&s>i||"max"==n[0]&&s<i)&&(s=i)}}),s}const V={class:`class="outer case ${H}"`,style:`style="width: var(--case-size); border-right: none; ${M}"`,editing:!1,drawPaused:!1,isActive:!1,timeout:300,initialTime:0,stoppedTime:0,interval:0,now:0,remains:0,getBaseHTML:()=>(V.class=`class="outer case ${H}"`,V.style=`style="width: var(--case-size); border-right: none; ${M}"`,V.class+V.style),reset:()=>{V.initialTime=V.stoppedTime=V.interval=0,V.now=V.remains=0}};m(v),p(v,true),c("--font-family","배달의민족 연성"),c("--font-size",`min(6vmax, ${E})`),u.innerHTML=_(u.innerHTML),c("--case-size-fixed",1.5*a()+"px"),c("--case-size",`min(${1.5*a()}px, 9vw)`),c("--btn-size",y),c("--case-border-style","solid"),c("--border-style","solid"),C(w,!0),c("--border-thickness",W),c("--font-size-title",1.25*a()+"px"),c("--case-size-title",j(o("--case-size"))+.25*a()+"px");class D{static fpsInterval;static startTime;static now;static then;static elapsed}function G(e){D.fpsInterval=1e3/e,D.then=performance.now(),D.startTime=D.then,J(),R()}function J(){D.now=performance.now(),D.elapsed=D.now-D.then,D.elapsed>D.fpsInterval&&(D.then=D.now-D.elapsed%D.fpsInterval,K()),V.drawPaused||requestAnimationFrame(J)}function K(){Z(b,"digits"),Z(h,"chinese","chars"),Z(g,"chinese","pinyin")}function Q(){E=window.innerWidth>1400?"4.5rem":window.innerWidth>1080?"3.5rem":window.innerWidth>840?"3rem":"2.4rem",W=window.innerWidth>840&&window.innerHeight>540?"5px":"3px"}function R(){Q(),U(1,1.618),c("--font-size",`min(6vmax, ${E})`),c("--case-size",`min(${1.5*a()}px, 9vw)`),c("--border-thickness",W),c("--font-size-title",1.25*a()+"px"),c("--case-size-title",j(o("--case-size"))+.25*a()+"px"),requestAnimationFrame(R)}G(5);const X={c:function(e){let t="";switch(e){case 0:t="零";break;case 1:t="一";break;case 2:t="二";break;case 3:t="三";break;case 4:t="四";break;case 5:t="五";break;case 6:t="六";break;case 7:t="七";break;case 8:t="八";break;case 9:t="九";break;case 10:t="十"}return t},p:function(e){let t="";switch(e){case 0:t="líng";break;case 1:t="yī";break;case 2:t="èr";break;case 3:t="sān";break;case 4:t="sì";break;case 5:t="wǔ";break;case 6:t="liù";break;case 7:t="qī";break;case 8:t="bā";break;case 9:t="jiǔ";break;case 10:t="shí"}return t}},Y={m3:0,m2:0,m1:0,s3:0,s2:0,s1:0,getIds:function(){return[i("m3"),i("m2"),i("m1"),i("s3"),i("s2"),i("s1")]},convertTo:e=>{"chars"==e?(Y.m3=X.c(Y.m3),Y.m2=X.c(Y.m2),Y.m1=X.c(Y.m1),Y.s3=X.c(Y.s3),Y.s2=X.c(Y.s2),Y.s1=X.c(Y.s1)):"pinyin"==e&&(Y.m3=X.p(Y.m3),Y.m2=X.p(Y.m2),Y.m1=X.p(Y.m1),Y.s3=X.p(Y.s3),Y.s2=X.p(Y.s2),Y.s1=X.p(Y.s1))}};function Z(e,t,i){V.isActive?(V.initialTime||(V.initialTime=r()),V.now=r()-V.initialTime):V.initialTime&&(V.interval=r()-V.stoppedTime),V.remains=V.timeout-V.now,V.remains<0&&(V.remains=0),ee(e,t,i,Math.floor(V.remains/60),Math.floor(V.remains%60))}function ee(e,t,i,n,s){te(t,n,s),ie(e,t,i)}function te(e,t,i){"digits"==e?(Y.m3=Y.s3=" ",Y.m2=t<10?" ":Math.floor(t/10),Y.s2=i<10?" ":Math.floor(i/10),Y.m1=Math.floor(t%10),Y.s1=Math.floor(i%10)):"chinese"==e&&(te("digits",t,i),Y.m3=Y.m2>1?Y.m2:"",Y.s3=Y.s2>1?Y.s2:"",Y.m2=Y.m2>0?10:"",Y.s2=Y.s2>0?10:"",Y.m2>0&&0==Y.m1&&(Y.m1=""),Y.s2>0&&0==Y.s1&&(Y.s1=""))}function ie(e,t,i){let n,s,a="";M=H="","digits"==t?(n="분",s="초",M="font-family: simsun; font-weight: bold;",a=`contenteditable="${V.editing}"`,H=V.editing?"editTime":""):"chinese"==t&&("chars"==i?(Y.convertTo("chars"),n="分",s="秒",e.style.fontFamily="kaiti"):"pinyin"==i&&(Y.convertTo("pinyin"),n="fēn",s="miǎo",e.style.fontFamily="NotoSerif-Medium"));let r=V.getBaseHTML();e.innerHTML=`\n        <div class="outer">\n            <div id="m3"             ${r}>   ${_(Y.m3)}   </div>\n            <div id="m2" ${a} ${r}>   ${_(Y.m2)}   </div>\n            <div id="m1" ${a} ${r}>   ${_(Y.m1)}   </div>\n            <div ${r.split("font")[0]}">     ${_(n)} </div>\n            <div ${r.split("font")[0]}">                             </div>\n            <div id="s3"             ${r}>   ${_(Y.s3)}   </div>\n            <div id="s2" ${a} ${r}>   ${_(Y.s2)}   </div>\n            <div id="s1" ${a} ${r}>   ${_(Y.s1)}   </div>\n            <div ${r.split("border")[0]}">   ${_(s)} </div>\n        </div>\n    `}const ne=i("btn-setTimeout"),se=i("btn-timer"),ae=i("btn-resetTime"),re=i("btn-border"),ce=i("btn-color"),oe=i("btn-wrapper");var le=!1;class de{constructor(e,t,i=null,n=i,s=null,a=null){this.$btnId=e,this.description=t,this.states=[i,n],this.iconName=[s,a],this.i=0,"UNSET"!=i&&this.setupBtn()}doclick(){return this.switchState(),this.setupBtn(),this.i}switchState(){return this.i=this.i?0:1}getState(){return this.states[this.i]}getIconName(){return null==this.iconName[0]?""+this.$btnId.id:`${this.$btnId.id}-${this.iconName[this.i]}`}setupBtn(){this.$btnId.innerHTML=`\n            <abbr title='${this.description}'>\n                <svg>\n                    <use xlink:href="icons/min/${this.getIconName()}.svg#레이어_1"></use>\n                </svg>\n            </abbr>\n        `}}var me=new de(ne,"시간 설정",!1,!0,"edit","resume"),pe=new de(se,"타이머 시작/일시 정지",V.isActive,!0,"start","stop"),ue=new de(ae,"타이머 초기화",V.timeout),be=new de(re,"윤곽선 숨기기/보이기",1,0,"none","solid"),he=new de(ce,"색 선택","UNSET"),ge=new de(oe,"모서리 모양",true,!1,"nowrap","wrap");function fe(){i("cpOuter").style.fill=i("colorpicker").value,i("cpOuter").style.filter="brightness(100%)",i("cpInner").style.fill=i("colorpicker").value,i("cpInner").style.filter="brightness(0.4)",le?requestAnimationFrame(fe):(i("cpOuter").removeAttribute("style"),i("cpInner").removeAttribute("style"))}he.setupBtn=()=>{he.$btnId.innerHTML=`\n        <abbr title='${he.description}'>\n            <div style="position: relative; display: inline-block;">\n                <input id="colorpicker" type="color" value="${d(o("--base-color"))}">\n                <label for="colorpicker">\n                    <svg id="cpOuter" class="outer">\n                        <use xlink:href="icons/min/btn-color-outer.svg#레이어_1"></use>\n                    </svg>\n                    <svg id="cpInner" class="inner">\n                        <use xlink:href="icons/min/btn-color-inner.svg#레이어_1"></use>\n                    </svg>\n                </label>\n            </div>\n        </abbr>\n    `},he.setupBtn(),ne.addEventListener("click",(function(){me.doclick(),V.editing=me.getState(),V.editing?(c("--btn-setTime-alpha",`rgba(${w}, ${k}`),V.isActive&&se.click(),K(),V.drawPaused=!0):(1==be.getState()?c("--btn-setTime-alpha",`rgba(${w}, 1`):c("--btn-setTime-alpha",`rgba(${w}, ${T}`),V.timeout=O(),V.reset(),K())})),se.addEventListener("click",(function(){pe.doclick(),V.isActive=pe.getState(),V.isActive?(1==me.getState()&&ne.click(),V.initialTime+=V.interval,V.drawPaused&&(V.drawPaused=!1,J())):V.stoppedTime=r()})),ae.addEventListener("click",(function(){V.reset()})),re.addEventListener("click",(function(){be.doclick(),c("--border-alpha",`rgba(${w}, ${be.getState()})`),1==be.getState()?(c("--btn-alpha",`rgba(${w}, 1)`),0==me.getState()&&c("--btn-setTime-alpha",`rgba(${w}, 1`)):(c("--btn-alpha",`rgba(${w}, ${T})`),0==me.getState()&&c("--btn-setTime-alpha",`rgba(${w}, ${T}`))})),ce.addEventListener("click",(function(){le=!0,fe()})),i("colorpicker").addEventListener("change",(function(){le=!1,C(l(i("colorpicker").value))})),oe.addEventListener("click",(function(){ge.doclick(),console.log(ge.getState()),p(v,ge.getState())}));